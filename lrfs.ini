[uwsgi]
module = wsgi:app
http = 127.0.0.1:5000
master = true
processes = 1  # Single process for camera access
threads = 4    # Increase threads for concurrency
buffer-size = 65536
socket = lrfs.sock
chmod-socket = 660
vacuum = true
stats = lrfs_stats.sock
harakiri = 300  # Adjust based on your application's needs

logto = lrfs.log

die-on-term = true

# Suppress SIGPIPE errors for video streaming
ignore-sigpipe = true
# Disable broken pipe logging for streaming endpoints  
disable-logging = true
log-5xx = true
log-4xx = true
